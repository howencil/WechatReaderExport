# 微信读书笔记导出器 📚

<div align="center">

![Logo](public/icons/icon.svg)

**一键导出微信读书笔记，让你的知识永不丢失！**

支持 Markdown、JSON、TXT 多种格式 | 智能识别 | 完整数据提取 | 本地处理保护隐私

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Chrome Extension](https://img.shields.io/badge/Chrome-Extension-blue.svg)](https://developer.chrome.com/docs/extensions/)
[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)

</div>

## ✨ 核心特性

### 🎯 智能页面识别
- **自动检测页面类型** - 智能识别微信读书的笔记页面、阅读页面、书籍详情页等
- **书籍信息提取** - 自动获取书名、作者、封面等完整信息
- **笔记统计显示** - 实时显示当前页面的笔记数量，让你心中有数

### 📝 强大数据提取
- **全类型笔记支持** - 高亮标注、个人想法、书签收藏，一个都不漏
- **完整信息提取** - 原文摘录、个人笔记、章节位置、创建时间等完整数据
- **智能内容识别** - 采用多种策略识别笔记内容，适应页面结构变化
- **批量处理能力** - 支持大量笔记的批量提取和处理

### 📄 多格式导出

#### 📋 Markdown 格式（推荐）
- 按章节自动整理，结构清晰
- 原文使用引用格式，便于区分
- 兼容所有 Markdown 编辑器
- 适合知识管理和后续编辑

#### 📊 JSON 格式（程序处理）
- 完整结构化数据
- 包含所有元数据信息
- 便于数据分析和程序处理
- 支持数据迁移和转换

#### 📃 TXT 格式（通用兼容）
- 纯文本格式，最佳兼容性
- 支持所有设备和软件
- 清晰的排版布局
- 文件体积最小

### 💫 极致用户体验
- **一键操作** - 简单三步完成导出：检测 → 选择 → 下载
- **实时状态反馈** - 清晰显示页面检测结果和导出进度
- **智能文件命名** - 自动生成 `书名_笔记_日期.格式` 的文件名
- **错误友好处理** - 完善的错误提示和恢复机制

## 🚀 快速开始

### 📦 安装插件

#### 方式一：Chrome Web Store（即将上线）
*正在准备上架 Chrome Web Store，敬请期待...*

#### 方式二：手动安装开发版
1. **下载插件包**
   ```bash
   git clone https://github.com/your-username/WechatReaderExport.git
   cd WechatReaderExport
   npm install
   npm run build
   ```

2. **加载到 Chrome**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启右上角的"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目的 `dist` 文件夹
   - 安装完成！插件图标会出现在工具栏

### 📖 使用教程

#### 第一步：打开微信读书
访问 [微信读书官网](https://weread.qq.com)，登录你的账号

#### 第二步：进入笔记页面

**推荐方式：专门的笔记页面**
1. 在首页选择任意书籍
2. 点击书籍封面进入详情页
3. 点击"笔记"标签页
4. 等待笔记内容完全加载

**替代方式：阅读页面**
1. 打开任意书籍开始阅读
2. 在阅读页面可直接导出该书的笔记

#### 第三步：使用插件导出

1. **打开插件**
   - 点击浏览器工具栏中的插件图标
   - 插件会自动检测当前页面

2. **检查状态**
   - 确认显示绿色成功状态
   - 查看笔记数量统计（如"检测到笔记页面，发现 15 条笔记"）
   - 如果显示错误，点击刷新按钮 🔄 重新检测

3. **选择导出格式**
   - **Markdown** - 推荐用于知识管理和笔记整理
   - **JSON** - 推荐用于数据处理和程序分析  
   - **TXT** - 推荐用于简单查看和打印

4. **开始导出**
   - 点击"导出笔记"按钮
   - 等待处理完成（大量笔记可能需要几秒钟）
   - 在弹出的保存对话框中选择保存位置
   - 完成！

## 📋 页面支持详情

| 页面类型 | URL 模式 | 支持状态 | 说明 |
|---------|----------|---------|------|
| 📚 **笔记页面** | `/web/book/*?type=note` | ✅ **完全支持** | 专门的笔记查看页面，推荐使用 |
| 📖 **阅读页面** | `/web/reader/*` | ✅ **完全支持** | 在阅读过程中导出当前书籍笔记 |
| 📕 **书籍详情页** | `/web/bookDetail/*` | ⚠️ **仅识别** | 显示书籍信息，需点击"笔记"进入笔记页面 |
| 📚 **书架页面** | `/web/shelf` | ⚠️ **仅识别** | 提示选择具体书籍进入笔记页面 |
| 💬 **书评页面** | `/web/review/*` | ❌ **不支持** | 不包含个人笔记内容 |
| 🌐 **其他页面** | 非微信读书域名 | ❌ **不支持** | 请先访问微信读书网站 |

## 📊 导出格式示例

### 📋 Markdown 格式示例
```markdown
# 《思考，快与慢》

**作者:** 丹尼尔·卡尼曼
**导出时间:** 2025-09-07 20:30:15
**笔记数量:** 15 条

---

## 第一部分：两个系统

### 笔记 1
> 我们的大脑有快与慢两套决策系统。系统1运行很快，系统2运行较慢。

**我的想法:** 这个双系统理论很有趣，解释了很多日常决策中的认知偏差现象。

*创建时间: 2025-09-06 15:30:00*

---

### 笔记 2
> 系统1是无意识且快速的，不怎么费脑力，没有感觉，很难控制。

**我的想法:** 这就是我们常说的"直觉"，但直觉并不总是正确的。

*创建时间: 2025-09-06 16:45:00*

---
```

### 📊 JSON 格式示例
```json
{
  "bookInfo": {
    "bookId": "123456789",
    "title": "思考，快与慢",
    "author": "丹尼尔·卡尼曼",
    "cover": "https://example.com/cover.jpg"
  },
  "notes": [
    {
      "id": "note_abc123_0",
      "bookId": "123456789",
      "bookTitle": "思考，快与慢",
      "bookAuthor": "丹尼尔·卡尼曼",
      "chapterTitle": "第一部分：两个系统",
      "originalText": "我们的大脑有快与慢两套决策系统。",
      "noteContent": "这个双系统理论很有趣...",
      "createTime": "2025-09-06T15:30:00.000Z",
      "noteType": "highlight",
      "color": "#FFEB3B"
    }
  ],
  "exportTime": "2025-09-07T12:30:15.000Z",
  "totalCount": 15
}
```

### 📃 TXT 格式示例
```
思考，快与慢
================

作者: 丹尼尔·卡尼曼
导出时间: 2025-09-07 20:30:15
笔记数量: 15 条

笔记 1
----------
章节: 第一部分：两个系统
原文: 我们的大脑有快与慢两套决策系统。
笔记: 这个双系统理论很有趣，解释了很多日常决策中的认知偏差现象。
时间: 2025-09-06 15:30:00

笔记 2
----------
章节: 第一部分：两个系统
原文: 系统1是无意识且快速的，不怎么费脑力。
笔记: 这就是我们常说的"直觉"，但直觉并不总是正确的。
时间: 2025-09-06 16:45:00
```

## 🔧 常见问题解决

### ❓ 为什么检测不到笔记？

**可能原因和解决方法：**
1. **页面类型不支持**
   - ✅ 确保在笔记页面或阅读页面
   - ✅ 检查 URL 是否包含 `/web/book/*?type=note` 或 `/web/reader/*`

2. **页面未完全加载**
   - ✅ 等待页面完全加载完成
   - ✅ 滚动到页面底部，确保所有笔记都已显示
   - ✅ 点击刷新按钮 🔄 重新检测

3. **书籍确实没有笔记**
   - ✅ 确认该书籍确实有添加过笔记
   - ✅ 检查笔记是否设为私有或被隐藏

### ❓ 导出的文件在哪里？

**文件保存位置：**
- 文件保存在浏览器的默认下载目录
- 文件名格式：`书名_笔记_2025-09-07.md`
- 可以在 Chrome 下载页面 (`chrome://downloads/`) 查看

### ❓ 导出的笔记内容不完整？

**检查和解决：**
1. **确保显示了所有笔记**
   - 在笔记页面滚动到最底部
   - 等待懒加载的内容完全显示
   - 如有分页，需要翻到最后一页

2. **重新尝试导出**
   - 刷新微信读书页面
   - 重新打开插件
   - 再次执行导出操作

3. **检查网络连接**
   - 确保网络连接稳定
   - 避免在页面加载过程中进行导出

### ❓ 插件显示"无法连接到页面"？

**解决步骤：**
1. **刷新页面** - 刷新微信读书页面
2. **重新加载插件** - 在 `chrome://extensions/` 页面点击插件的刷新按钮
3. **检查权限** - 确认插件有访问微信读书网站的权限
4. **重启浏览器** - 如问题持续，尝试重启 Chrome 浏览器

### ❓ 能否批量导出多本书的笔记？

**当前版本限制：**
- 目前版本需要逐本操作，每次导出一本书的笔记
- 批量导出功能已在开发计划中
- 临时解决方案：可以手动重复导出多本书

## 🛡️ 隐私与安全

### 🔒 数据安全保证

**我们承诺：**
- ✅ **完全本地处理** - 所有数据处理在你的浏览器本地完成
- ✅ **零数据上传** - 不会向任何服务器发送你的笔记内容
- ✅ **无数据收集** - 不收集、存储任何个人信息
- ✅ **开源透明** - 代码完全开源，可随时审查

### 🛡️ 权限使用说明

| 权限 | 用途 | 必要性 |
|------|------|--------|
| `activeTab` | 访问当前标签页，检测微信读书页面 | 必需 - 用于识别页面类型 |
| `storage` | 保存用户设置和临时数据 | 可选 - 仅存储导出格式偏好 |
| `tabs` | 与页面内容脚本通信 | 必需 - 用于提取笔记数据 |
| `downloads` | 下载导出的笔记文件 | 必需 - 用于保存文件到本地 |
| `*.weread.qq.com` | 在微信读书网站运行 | 必需 - 仅在微信读书网站生效 |

### 🔍 开源代码审查

**代码透明：**
- 📖 [查看源码](https://github.com/your-username/WechatReaderExport)
- 🐛 [报告问题](https://github.com/your-username/WechatReaderExport/issues)
- 🤝 [参与贡献](CONTRIBUTING.md)

## 🚀 高级用法

### 🔄 自动化导出工作流

1. **定期备份笔记**
   - 建议每周导出一次笔记作为备份
   - 使用 JSON 格式保存完整数据
   - 使用 Markdown 格式便于阅读和编辑

2. **笔记管理建议**
   - 按书籍分类整理导出的文件
   - 使用统一的文件命名规则
   - 配合 Obsidian、Notion 等知识管理工具

### 📚 与其他工具集成

**推荐配套工具：**
- **Obsidian** - 导入 Markdown 格式进行知识图谱管理
- **Notion** - 导入为数据库进行结构化管理
- **Anki** - 将重点笔记制作成记忆卡片
- **Markdown 编辑器** - 如 Typora、Mark Text 等

## 📈 更新日志

### v1.0.0 (2025-09-07) 🎉
**首次发布**
- ✨ 智能页面检测和书籍信息提取
- 📝 强大的笔记内容提取功能  
- 📄 支持 Markdown、JSON、TXT 三种导出格式
- 💫 优秀的用户界面和交互体验
- 🔧 完善的错误处理和状态反馈
- 🛡️ 本地处理，保护用户隐私

## 🤝 贡献与支持

### 💡 问题反馈
遇到问题或有改进建议？
- 📝 [提交 Issue](https://github.com/your-username/WechatReaderExport/issues)
- 💬 [参与讨论](https://github.com/your-username/WechatReaderExport/discussions)
- 📧 发送邮件：your-email@example.com

### 👨‍💻 开发贡献
欢迎开发者参与贡献！
- 🔀 [Fork 项目](https://github.com/your-username/WechatReaderExport/fork)
- 📖 阅读 [贡献指南](CONTRIBUTING.md)
- 🚀 提交 Pull Request

### ❤️ 支持项目
如果这个项目对你有帮助：
- ⭐ [给项目点个 Star](https://github.com/your-username/WechatReaderExport)
- 📢 分享给其他微信读书用户
- 📝 在 Chrome Web Store 留下好评
- ☕ [请我喝杯咖啡](https://buymeacoffee.com/your-username)

## 🔗 相关链接

- 🏠 [项目主页](https://github.com/your-username/WechatReaderExport)
- 📚 [使用文档](https://github.com/your-username/WechatReaderExport/wiki)
- 🐛 [问题反馈](https://github.com/your-username/WechatReaderExport/issues)
- 💬 [讨论区](https://github.com/your-username/WechatReaderExport/discussions)
- 🌐 [Chrome Web Store](#)（即将上线）

## 📜 开源协议

本项目基于 [MIT License](LICENSE) 开源协议，你可以自由使用、修改和分发。

---

<div align="center">

**让阅读留下痕迹，让知识永不丢失** 📚✨

Made with ❤️ by [YourName](https://github.com/your-username)

如果觉得有用，请给个 ⭐ Star 支持一下！

</div>